#-----------------------------------------------------
#-- this file is auto generated by makemake.py
#--                      copyright ujinosuke
#-----------------------------------------------------

#-- Setting
CC = emcc
LINKER = emcc
CFLAGS = -O0 -g
LDFLAGS = -lm
INCLUDE = 
OUTDIR = obj
TARGET = index.html


#-- Include
INCLUDE +=\
-I.\a \
-I.\b

#-- Objects
OBJS =\
$(OUTDIR)/foo.o \
$(OUTDIR)/hello.o

#-- TARGET
all: $(OUTDIR) depend $(OUTDIR)/$(TARGET)
$(OUTDIR)/$(TARGET): $(OBJS)
	$(LINKER) $(LDFLAGS) -o $(OUTDIR)/$(TARGET) $^

$(OUTDIR)/foo.o: .\a\foo.c .\a\foo.h .\b\hello.h
	$(CC) $(INCLUDE) $(CFLAGS) -c $< -o $@

$(OUTDIR)/foo.d: .\a\foo.c
	$(CC) $(INCLUDE) $(CFLAGS) -c $< -o $@ -MM
#	@sed -e '1s/^/obj/g' $@ > $@.d0
#	@sed -e 's/.o/.d/g' $@.d0 > $@.d1

$(OUTDIR)/hello.o: .\b\hello.c
	$(CC) $(INCLUDE) $(CFLAGS) -c $< -o $@

$(OUTDIR)/hello.d: .\b\hello.c
	$(CC) $(INCLUDE) $(CFLAGS) -c $< -o $@ -MM
#	@sed -e '1s/^/obj/g' $@ > $@.d0
#	@sed -e 's/.o/.d/g' $@.d0 > $@.d1

$(OUTDIR):
	mkdir $@
.PHNOY: depend clean make conf
clean:
	@echo ---- clean project -----
	del $(OUTDIR)\*.d $(OUTDIR)\*.d0 $(OUTDIR)\*.d1 $(OUTDIR)\*.o $(OUTDIR)\$(TARGET)
depend: $(OBJS:.o=.d)

-include $(OUTDIR)\*.d0
-include $(OUTDIR)\*.d1

make:
	python .\makemake.py 

conf:
	@echo no configuration project

